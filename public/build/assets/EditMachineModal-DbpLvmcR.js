import{m as N,r as h,j as e}from"./app-CrM3bAr7.js";import{I as r}from"./input-error-B-ImtbXT.js";import{B as x}from"./button-DSYtEUz-.js";import{D as S,a as D,b as y,c as C,d as I,e as T}from"./dialog-13Vh7iYP.js";import{I as j}from"./input-BwgTVrff.js";import{L as o}from"./label-Dif50TA4.js";import{S as E,a as F,b as M,c as U,d as k}from"./select-ZNRTKmmh.js";import{T as w}from"./textarea-BH7YRjF0.js";import{I as B}from"./info-Bft2xYep.js";import"./utils-jAU0Cazi.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./index-DCk08MMz.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./x-DprXbeJV.js";import"./createLucideIcon-BQ0uF5zu.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-Cxnn9A7l.js";import"./index-Dyr2mIP4.js";import"./index-GEmL2IxC.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./check-BKXQxHa7.js";function ue({machine:i,statuses:n,isOpen:m,onOpenChange:l}){const{data:c,setData:a,post:f,processing:g,errors:t,reset:b}=N({_method:"PUT",name:i.name,description:i.description||"",machine_status_id:i.machine_status.id,image:null});h.useEffect(()=>{m&&(b(),a({name:i.name,description:i.description||"",machine_status_id:i.machine_status.id,image:null,_method:"PUT"}))},[m,i]);const v=s=>{s.preventDefault(),f(route("machines.update",i.id),{onSuccess:()=>l(!1)})},_=h.useMemo(()=>{const s=n.find(u=>u.is_operational_default),d=n.find(u=>u.id===i.machine_status.id),p=new Map;return d&&p.set(d.id,d),s&&p.set(s.id,s),Array.from(p.values())},[n,i.machine_status.id]);return e.jsx(S,{open:m,onOpenChange:l,children:e.jsxs(D,{children:[e.jsxs(y,{children:[e.jsxs(C,{children:["Edit Machine: ",i.name]}),e.jsxs(I,{children:["Update the details for this machine.",e.jsx("br",{}),e.jsxs("div",{className:"mt-2 flex items-start gap-2 rounded-lg border border-blue-500/50 bg-blue-50 p-3 text-sm text-blue-800",children:[e.jsx(B,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("p",{children:"Note: The status can only be manually changed to the operational status."})]})]})]}),e.jsxs("form",{id:"edit-machine-form",onSubmit:v,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Name"}),e.jsx(j,{className:"ring-1 ring-ring hover:bg-accent",id:"name",value:c.name,onChange:s=>a("name",s.target.value),required:!0}),e.jsx(r,{message:t.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"description",children:"Description"}),e.jsx(w,{className:"ring-1 ring-ring hover:bg-accent",id:"description",value:c.description,onChange:s=>a("description",s.target.value)}),e.jsx(r,{message:t.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"machine_status_id",children:"Status"}),e.jsxs(E,{value:String(c.machine_status_id),onValueChange:s=>a("machine_status_id",Number(s)),children:[e.jsx(F,{className:"ring-1 ring-ring hover:bg-accent",id:"machine_status_id",children:e.jsx(M,{placeholder:"Select a status..."})}),e.jsx(U,{children:_.map(s=>e.jsx(k,{className:"hover:bg-accent",value:String(s.id),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full border",style:{backgroundColor:s.bg_color}}),e.jsx("span",{children:s.name})]})},s.id))})]}),e.jsx(r,{message:t.machine_status_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"image",children:"Update Image (Optional)"}),e.jsx(j,{className:"ring-1 ring-ring hover:bg-accent",id:"image",type:"file",onChange:s=>a("image",s.target.files?s.target.files[0]:null)}),e.jsx(r,{message:t.image})]})]}),e.jsxs(T,{children:[e.jsx(x,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(x,{type:"submit",form:"edit-machine-form",disabled:g,children:g?"Saving...":"Save Changes"})]})]})})}export{ue as EditMachineModal};
