import{U as t,j as e,L as W,S as l}from"./app-CrM3bAr7.js";import{B as $}from"./badge-IgYfdO9V.js";import{B as n}from"./button-DSYtEUz-.js";import{C as g,a as H,b as U,c as F}from"./card-jCh-kFsa.js";import{C as N}from"./confirm-delete-dialog-6UrjvZCz.js";import{A as Q,T as R}from"./app-layout-CK9_8PlX.js";import{u as d}from"./useCan-CJh7wlIU.js";import{AddSubsystemWizard as Z}from"./AddSubsystemWizard-D0BKPgI8.js";import{EditMachineModal as G}from"./EditMachineModal-DbpLvmcR.js";import{EditSubsystemModal as J}from"./EditSubsystemModal-9oQDMfKX.js";import{ManageInspectionPointsModal as K}from"./ManageInspectionPointsModal-DX60OO0d.js";import{SubsystemAccordion as V}from"./SubsystemAccordion-CUJSi1HP.js";import{c as m}from"./createLucideIcon-BQ0uF5zu.js";import{P as X}from"./pencil-fd9eBnUr.js";import{T as Y}from"./trash-2-BGsS4Tma.js";import{C as ee}from"./clock-arrow-up-ClzO97On.js";import{W as se}from"./wrench-D9uW3F3T.js";import{C as te}from"./circle-plus-C35qyZhc.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./alert-dialog-DBPQtoSw.js";import"./index-BYkqkD9G.js";import"./index-DCk08MMz.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./x-DprXbeJV.js";import"./tooltip-DWc-CuE-.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-GEmL2IxC.js";import"./index-Dyr2mIP4.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-CFGBrPdz.js";import"./dropdown-menu-D615tSEK.js";import"./index-Cxnn9A7l.js";import"./check-BKXQxHa7.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./chevron-right-B5DMNuK2.js";import"./separator-C07NZpcB.js";import"./dialog-13Vh7iYP.js";import"./input-BwgTVrff.js";import"./label-Dif50TA4.js";import"./input-error-B-ImtbXT.js";import"./select-ZNRTKmmh.js";import"./index-D9YkVoQb.js";import"./chevron-down-BZjTBYLj.js";import"./textarea-BH7YRjF0.js";import"./info-Bft2xYep.js";import"./send-WmHc0PdS.js";import"./accordion-CCdQnk3G.js";import"./chart-no-axes-gantt-dYUB9MaW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ae=m("BadgeAlert",ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],b=m("History",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],oe=m("QrCode",ne);function ps({machine:s,statuses:v,uptime:r,stats:c}){const[M,p]=t.useState(!1),[S,x]=t.useState(!1),[k,o]=t.useState(!1),[h,u]=t.useState(null),[C,f]=t.useState(!1),[w,O]=t.useState(null),[D,j]=t.useState(!1),[T,_]=t.useState(null),[I,y]=t.useState(!1),i={create:d("machines.create"),edit:d("machines.edit"),delete:d("machines.delete")},A=[{title:"Machines",href:route("machines.index")},{title:s.name,href:route("machines.show",s.id),isCurrent:!0}],z=a=>{u(a),o(!0)},E=()=>{h&&l.delete(route("subsystems.destroy",h),{preserveScroll:!0,onSuccess:()=>{o(!1),u(null)}})},P=a=>{O(a),f(!0)},B=a=>{_(a),j(!0)},L=()=>{l.delete(route("machines.destroy",s.id))},q=()=>{l.reload({only:["machine"]})};return e.jsxs(Q,{breadcrumbs:A,children:[e.jsx(W,{title:`Machine: ${s.name}`}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx(g,{className:"drop-shadow-lg shadow-lg",children:e.jsxs("div",{className:"grid md:grid-cols-2",children:[e.jsxs("div",{className:"flex flex-col p-6",children:[e.jsxs("div",{className:"flex flex-col pb-4",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx($,{className:"text-sm",style:{backgroundColor:s.machine_status.bg_color,color:s.machine_status.text_color},children:s.machine_status.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"secondary",size:"icon",asChild:!0,children:e.jsx("a",{href:route("machines.qr-code",s.id),target:"_blank",children:e.jsx(oe,{className:"h-4 w-4"})})}),i.edit&&e.jsx(n,{variant:"default",size:"icon",onClick:()=>p(!0),children:e.jsx(X,{className:"h-4 w-4"})}),i.delete&&e.jsx(n,{variant:"destructive",size:"icon",onClick:()=>y(!0),children:e.jsx(Y,{className:"h-4 w-4"})})]})]}),e.jsx("h1",{className:"mb-2 text-3xl font-bold",children:s.name}),e.jsx("p",{className:"mb-6 leading-relaxed text-muted-foreground",children:s.description||"No description provided."}),e.jsxs("div",{className:"mt-4 gap-2",children:[r.since&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(b,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"In Service Since:"}),e.jsx("span",{className:"ml-auto font-semibold",children:r.since})]}),r.duration&&e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(ee,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Uptime Duration:"}),e.jsx("span",{className:"ml-auto font-semibold",children:r.duration})]})]})]}),e.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-4 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subsystems"}),e.jsx("p",{className:"text-lg font-bold",children:c.subsystems_count})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Open Tickets"}),e.jsx("p",{className:"text-lg font-bold",children:"0"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Points"}),e.jsx("p",{className:"text-lg font-bold",children:c.inspection_points_count})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Inspected"}),e.jsx("p",{className:"text-lg font-bold",children:"N/A"})]})]})]})]}),e.jsx("div",{className:"flex items-center justify-center p-6",children:s.image_url?e.jsx("img",{src:s.image_url,alt:`Image of ${s.name}`,className:"max-h-96 w-full rounded-lg object-contain"}):e.jsx("div",{className:"flex h-64 w-full items-center justify-center rounded-md bg-muted",children:e.jsx("p",{className:"text-muted-foreground",children:"No image available"})})})]})}),e.jsxs(g,{className:"drop-shadow-lg shadow-lg",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(U,{children:["Subsystems for ",s.name]}),i.create&&e.jsxs(n,{variant:"default",size:"sm",className:"flex items-center gap-2",onClick:()=>x(!0),children:[e.jsx(te,{className:"h-4 w-4"}),"Add Subsystem"]})]})}),e.jsx(F,{children:e.jsx(V,{machine:s,onDelete:z,onEdit:P,onManagePoints:B,can:i})})]})]}),e.jsx(G,{machine:s,statuses:v,isOpen:M,onOpenChange:p}),e.jsx(Z,{machineId:s.id,isOpen:S,onOpenChange:x,onFinish:q}),e.jsx(N,{isOpen:k,onOpenChange:o,onConfirm:E,title:"Delete Subsystem",description:"This will permanently delete the subsystem and all of its associated inspection points. This action cannot be undone."}),i.edit&&e.jsx(J,{subsystem:w,isOpen:C,onOpenChange:f})," ",e.jsx(K,{subsystem:T,isOpen:D,onOpenChange:j,can:i}),e.jsx(N,{isOpen:I,onOpenChange:y,onConfirm:L,title:`Delete Machine: ${s.name}`,description:"This action cannot be undone. This will permanently delete the entire machine, including all of its subsystems and inspection points."})]})}export{ps as default};
