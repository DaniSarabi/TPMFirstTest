import{r as s,m as P,S as O,j as t,L as k}from"./app-CrM3bAr7.js";import{u as B,D as G,g as V}from"./data-table-DUdic_wO.js";import{D as q}from"./data-table-view-options-4_U_3RXz.js";import{L as z}from"./list-toolbar-E0ROXguB.js";import{P as H}from"./pagination-Dz5UDBcr.js";import{B as J}from"./button-DSYtEUz-.js";import{A as K}from"./app-layout-CK9_8PlX.js";import{G as Q}from"./general-settings-layout-CkIbxbx9.js";import{u}from"./useCan-CJh7wlIU.js";import{BehaviorsInfoModal as U}from"./BehaviorsInfoModal-DoMGKoj-.js";import{getColumns as W}from"./Columns-H1QSVNla.js";import{InspectionStatusFormModal as X}from"./InspectionStatusFormModal-Chfq7XC5.js";import{ReassignAndDeleteStatusModal as Y}from"./ReassignAndDeleteInspectionStatusModal-DMHbj-nJ.js";import{C as Z}from"./circle-plus-C35qyZhc.js";import"./utils-jAU0Cazi.js";import"./dropdown-menu-D615tSEK.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-GEmL2IxC.js";import"./index-DCk08MMz.js";import"./index-Dyr2mIP4.js";import"./index-Cxnn9A7l.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./check-BKXQxHa7.js";import"./createLucideIcon-BQ0uF5zu.js";import"./input-BwgTVrff.js";import"./select-ZNRTKmmh.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./chevron-left-D6TzJdSq.js";import"./chevron-right-B5DMNuK2.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./x-DprXbeJV.js";import"./tooltip-DWc-CuE-.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./badge-IgYfdO9V.js";import"./separator-C07NZpcB.js";import"./heading-BlBufu9I.js";import"./mail-59cOGpao.js";import"./dialog-13Vh7iYP.js";import"./data-table-column-header-B8b-xJ6_.js";import"./pencil-fd9eBnUr.js";import"./trash-2-BGsS4Tma.js";import"./input-error-B-ImtbXT.js";import"./checkbox-XYYM_-Ow.js";import"./color-picker-BeT-307a.js";import"./label-Dif50TA4.js";import"./info-Bft2xYep.js";import"./circle-x-CyllH9Co.js";import"./send-WmHc0PdS.js";import"./alert-dialog-DBPQtoSw.js";const $=[{title:"General Settings",href:route("settings.machine-status.index")},{title:"Inspection Statuses",href:route("settings.inspection-status.index"),isCurrent:!0}];function me({statuses:c,machineStatuses:d,behaviors:f,filters:a}){const[v,m]=s.useState(!1),[I,l]=s.useState(!1),[p,h]=s.useState(null),[n,M]=s.useState(null),[x,_]=s.useState(a.search||""),[o,g]=s.useState(a.sort?{id:a.sort,desc:a.direction==="desc"}:null),[T,S]=s.useState(!1),j=s.useRef(!0),r=P({name:"",bg_color:"#dcfce7",text_color:"#166534",behaviors:[]}),w={create:u("inspections.edit"),edit:u("inspections.edit"),delete:u("inspections.edit")};s.useEffect(()=>{if(j.current){j.current=!1;return}const e=setTimeout(()=>{O.get(route("settings.inspection-status.index"),{search:x,sort:o==null?void 0:o.id,direction:o!=null&&o.desc?"desc":"asc"},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(e)},[x,o]);const N=(e,i)=>{g(i===null?null:{id:e,desc:i==="desc"})},y=()=>{r.reset(),h(null),m(!0)},L=e=>{r.setData({name:e.name,bg_color:e.bg_color,text_color:e.text_color,behaviors:e.behaviors.map(i=>{var C;return{id:i.id,machine_status_id:((C=i.pivot)==null?void 0:C.machine_status_id)||null}})}),h(e),m(!0)},A=e=>{M(e),l(!0)},E=e=>{n&&O.delete(route("settings.inspection-status.destroy",n.id),{data:{new_status_id:e},onSuccess:()=>l(!1)})},R=e=>{e.preventDefault();const i=()=>m(!1);p&&"id"in p?r.put(route("settings.inspection-status.update",p.id),{onSuccess:i}):r.post(route("settings.inspection-status.store"),{onSuccess:i})},b=s.useMemo(()=>W(L,A,N,o,d),[o]),D=B({data:c.data,columns:b,getCoreRowModel:V()}),F=n?c.data.filter(e=>e.id!==n.id):[];return t.jsx(K,{breadcrumbs:$,children:t.jsxs(Q,{children:[t.jsx(k,{title:"Inspection Statuses"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Inspection Statuses"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage the statuses that operators can assign during an inspection."}),t.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["Learn more about"," ",t.jsx("button",{onClick:()=>S(!0),className:"text-primary italic hover:underline",children:"behaviors"}),"."]})]})}),t.jsx(z,{onSearch:_,searchPlaceholder:"Filter by status name...",createAction:w.create?t.jsxs(J,{onClick:y,className:"drop-shadow-lg",children:[t.jsx(Z,{className:"mr-2 h-4 w-4"}),"Add Status"]}):null,viewOptionsAction:t.jsx(q,{table:D})}),t.jsx(G,{table:D,columns:b}),t.jsx(H,{paginated:c})]}),t.jsx(X,{isOpen:v,onOpenChange:m,onSubmit:R,status:p,machineStatuses:d,behaviors:f,data:r.data,setData:r.setData,errors:r.errors,processing:r.processing}),t.jsx(Y,{isOpen:I,onOpenChange:l,onConfirm:E,statusToDelete:n,otherStatuses:F}),t.jsx(U,{isOpen:T,onOpenChange:S,behaviors:f})]})})}export{me as default};
