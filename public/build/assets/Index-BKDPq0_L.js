import{r as s,m as G,S as D,j as e,L as k}from"./app-CrM3bAr7.js";import{u as B,D as V,g as q}from"./data-table-DUdic_wO.js";import{D as z}from"./data-table-view-options-4_U_3RXz.js";import{L as H}from"./list-toolbar-E0ROXguB.js";import{P as J}from"./pagination-Dz5UDBcr.js";import{B as K}from"./button-DSYtEUz-.js";import{A as Q}from"./app-layout-CK9_8PlX.js";import{G as U}from"./general-settings-layout-CkIbxbx9.js";import{u}from"./useCan-CJh7wlIU.js";import{getColumns as W}from"./Columns-DYZuxnFr.js";import{StatusFormModal as X}from"./MachineStatusFormModal-T3eVAgw7.js";import{ReassignAndDeleteStatusModal as Y}from"./ReassingAndDeleteModal-DZg6nM5E.js";import{C as Z}from"./circle-plus-C35qyZhc.js";import"./utils-jAU0Cazi.js";import"./dropdown-menu-D615tSEK.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-GEmL2IxC.js";import"./index-DCk08MMz.js";import"./index-Dyr2mIP4.js";import"./index-Cxnn9A7l.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./check-BKXQxHa7.js";import"./createLucideIcon-BQ0uF5zu.js";import"./input-BwgTVrff.js";import"./select-ZNRTKmmh.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./chevron-left-D6TzJdSq.js";import"./chevron-right-B5DMNuK2.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./x-DprXbeJV.js";import"./tooltip-DWc-CuE-.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./badge-IgYfdO9V.js";import"./separator-C07NZpcB.js";import"./heading-BlBufu9I.js";import"./mail-59cOGpao.js";import"./data-table-column-header-B8b-xJ6_.js";import"./pencil-fd9eBnUr.js";import"./trash-2-BGsS4Tma.js";import"./input-error-B-ImtbXT.js";import"./checkbox-XYYM_-Ow.js";import"./color-picker-BeT-307a.js";import"./dialog-13Vh7iYP.js";import"./label-Dif50TA4.js";import"./textarea-BH7YRjF0.js";import"./info-Bft2xYep.js";import"./alert-dialog-DBPQtoSw.js";const $=[{title:"General Settings",href:route("settings.machine-status.index")},{title:"Machine Statuses",href:route("settings.machine-status.index"),isCurrent:!0}];function ae({statuses:c,filters:a}){const[_,n]=s.useState(!1),[C,l]=s.useState(!1),[m,d]=s.useState(null),[r,M]=s.useState(null),[h,O]=s.useState(a.search||""),[o,f]=s.useState(a.sort?{id:a.sort,desc:a.direction==="desc"}:null),x=s.useRef(!0),{data:p,setData:g,post:T,put:w,errors:v,reset:S,processing:y}=G({name:"",description:"",bg_color:"#dcfce7",text_color:"#166534",is_operational_default:!1}),A={create:u("machines.edit"),edit:u("machines.edit"),delete:u("machines.edit")};s.useEffect(()=>{if(x.current){x.current=!1;return}const t=setTimeout(()=>{D.get(route("settings.machine-status.index"),{search:h,sort:o==null?void 0:o.id,direction:o!=null&&o.desc?"desc":"asc"},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[h,o]);const E=(t,i)=>{f(i===null?null:{id:t,desc:i==="desc"})},L=()=>{S(),d(null),n(!0)},R=t=>{S(),g({name:t.name,description:t.description||"",bg_color:t.bg_color,text_color:t.text_color,is_operational_default:t.is_operational_default}),d(t),n(!0)},N=t=>{M(t),l(!0)},F=t=>{r&&D.delete(route("settings.machine-status.destroy",r.id),{data:{new_status_id:t},onSuccess:()=>l(!1)})},I=t=>{t.preventDefault();const i=()=>n(!1);m&&"id"in m?w(route("settings.machine-status.update",m.id),{...p,onSuccess:i}):T(route("settings.machine-status.store"),{...p,onSuccess:i})},j=s.useMemo(()=>W(R,N,E,o),[o]),b=B({data:c.data,columns:j,getCoreRowModel:q()}),P=r?c.data.filter(t=>t.id!==r.id):[];return e.jsx(Q,{breadcrumbs:$,children:e.jsxs(U,{children:[e.jsx(k,{title:"Machine Statuses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Machine Statuses"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage the statuses that can be assigned to machines."})]})}),e.jsx(H,{onSearch:O,searchPlaceholder:"Filter by status name...",createAction:A.create?e.jsxs(K,{onClick:L,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Add Status"]}):null,viewOptionsAction:e.jsx(z,{table:b})}),e.jsx(V,{table:b,columns:j}),e.jsx(J,{paginated:c})]}),e.jsx(X,{isOpen:_,onOpenChange:n,onSubmit:I,status:m,data:p,setData:g,errors:v,processing:y}),e.jsx(Y,{isOpen:C,onOpenChange:l,onConfirm:F,statusToDelete:r,otherStatuses:P})]})})}export{ae as default};
