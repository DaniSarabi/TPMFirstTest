import{r as l,j as s}from"./app-CrM3bAr7.js";import{c as I}from"./index-Dyr2mIP4.js";import{u as L}from"./index-CipIuUZM.js";import{u as v}from"./index-fR5QWmBt.js";import{P as m}from"./index-GEmL2IxC.js";import{c as d}from"./utils-jAU0Cazi.js";var f="Avatar",[w,q]=I(f),[_,p]=w(f),A=l.forwardRef((a,t)=>{const{__scopeAvatar:n,...e}=a,[r,o]=l.useState("idle");return s.jsx(_,{scope:n,imageLoadingStatus:r,onImageLoadingStatusChange:o,children:s.jsx(m.span,{...e,ref:t})})});A.displayName=f;var x="AvatarImage",S=l.forwardRef((a,t)=>{const{__scopeAvatar:n,src:e,onLoadingStatusChange:r=()=>{},...o}=a,c=p(x,n),i=b(e,o.referrerPolicy),u=L(g=>{r(g),c.onImageLoadingStatusChange(g)});return v(()=>{i!=="idle"&&u(i)},[i,u]),i==="loaded"?s.jsx(m.img,{...o,ref:t,src:e}):null});S.displayName=x;var j="AvatarFallback",C=l.forwardRef((a,t)=>{const{__scopeAvatar:n,delayMs:e,...r}=a,o=p(j,n),[c,i]=l.useState(e===void 0);return l.useEffect(()=>{if(e!==void 0){const u=window.setTimeout(()=>i(!0),e);return()=>window.clearTimeout(u)}},[e]),c&&o.imageLoadingStatus!=="loaded"?s.jsx(m.span,{...r,ref:t}):null});C.displayName=j;function b(a,t){const[n,e]=l.useState("idle");return v(()=>{if(!a){e("error");return}let r=!0;const o=new window.Image,c=i=>()=>{r&&e(i)};return e("loading"),o.onload=c("loaded"),o.onerror=c("error"),o.src=a,t&&(o.referrerPolicy=t),()=>{r=!1}},[a,t]),n}var h=A,k=S,N=C;function y({className:a,...t}){return s.jsx(h,{"data-slot":"avatar",className:d("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function R({className:a,...t}){return s.jsx(k,{"data-slot":"avatar-image",className:d("aspect-square size-full",a),...t})}function E({className:a,...t}){return s.jsx(N,{"data-slot":"avatar-fallback",className:d("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}const M=a=>a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);function B({user:a,className:t,...n}){const e=!!a.avatar_url,r=a.avatar_color||"#4f46e5";return s.jsxs(y,{className:d("ring-2 ring-offset-2 ring-offset-background",e?"ring-primary":"ring-transparent",t),style:{"--tw-ring-color":r},...n,children:[s.jsx(R,{src:a.avatar_url||"",alt:a.name}),s.jsx(E,{style:{backgroundColor:r},children:M(a.name||"")})]})}export{B as U};
