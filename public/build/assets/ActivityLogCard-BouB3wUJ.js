import{j as s}from"./app-CrM3bAr7.js";import{B as i}from"./badge-IgYfdO9V.js";import{C as l,a as h,b as x,c as d}from"./card-jCh-kFsa.js";import{T as _}from"./triangle-alert-C5k5l1el.js";import{c}from"./createLucideIcon-BQ0uF5zu.js";import{M as g}from"./mail-59cOGpao.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]],j=c("GitCommitVertical",w);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],y=c("MessageSquare",u);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]],b=c("Terminal",f),N=({update:e})=>{var r,t,o;return(r=e.comment)!=null&&r.startsWith("Ping:")?s.jsx(_,{className:"h-4 w-4 text-white"}):(t=e.comment)!=null&&t.startsWith("System:")?s.jsx(b,{className:"h-4 w-4 text-white"}):e.old_status||e.new_status?s.jsx(j,{className:"h-4 w-4 text-white"}):(o=e.comment)!=null&&o.startsWith("Sent a part request")?s.jsx(g,{className:"h-4 w-4 text-white"}):s.jsx(y,{className:"h-4 w-4 text-muted-foreground"})};function L({ticket:e}){const r=e.updates.filter(t=>{var o,n,a;return t.old_status||t.new_status||((o=t.comment)==null?void 0:o.startsWith("Ping:"))||((n=t.comment)==null?void 0:n.startsWith("System:"))||((a=t.comment)==null?void 0:a.startsWith("Sent a part request"))});return console.log("Actividades",r),s.jsxs(l,{className:"transition-500 shadow-lg drop-shadow-lg transition-transform ease-in-out hover:-translate-1",children:[s.jsx(h,{children:s.jsx(x,{children:"Activity Log"})}),s.jsx(d,{children:r.length>0?s.jsx("ol",{className:"relative border-s-2 border-secondary/20",children:r.slice().reverse().map((t,o)=>{var n,a,m;return s.jsxs("li",{className:o===r.length-1?"ms-6":"ms-6 mb-10",children:[s.jsx("span",{className:"absolute -start-3 flex h-6 w-6 items-center justify-center rounded-full bg-primary/80 ring-6 ring-primary/30",children:s.jsx(N,{update:t})}),s.jsxs("div",{className:"items-center justify-between sm:flex",children:[s.jsx("p",{className:"text-sm font-semibold text-foreground",children:(n=t.comment)!=null&&n.startsWith("System:")?"System":t.user.name}),s.jsx("time",{className:"mb-1 text-xs font-normal text-muted-foreground sm:order-last sm:mb-0",children:new Date(t.created_at).toLocaleString()})]}),s.jsxs("div",{className:"mt-1 rounded-md bg-muted/50 p-2 text-sm text-muted-foreground",children:[!t.old_status&&t.new_status&&s.jsxs(s.Fragment,{children:["Created the ticket and set status to"," ",s.jsx(i,{style:{backgroundColor:t.new_status.bg_color,color:t.new_status.text_color},children:t.new_status.name})]}),t.old_status&&t.new_status&&s.jsxs(s.Fragment,{children:["Changed status from"," ",s.jsx(i,{style:{backgroundColor:t.old_status.bg_color,color:t.old_status.text_color},children:t.old_status.name})," ","to"," ",s.jsx(i,{style:{backgroundColor:t.new_status.bg_color,color:t.new_status.text_color},children:t.new_status.name})]}),t.new_machine_status&&s.jsxs(s.Fragment,{children:["Set machine status to"," ",s.jsx(i,{style:{backgroundColor:t.new_machine_status.bg_color,color:t.new_machine_status.text_color},children:t.new_machine_status.name})]}),((a=t.comment)==null?void 0:a.startsWith("Ping:"))&&"Pinged this ticket: Issue was reported again.",((m=t.comment)==null?void 0:m.startsWith("Sent a part request"))&&s.jsx("p",{children:t.comment})]})]},t.id)})}):s.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:"No activity yet."})})]})}export{L as ActivityLogCard};
