import{r as B,j as e}from"./app-CrM3bAr7.js";import{I as w}from"./input-error-B-ImtbXT.js";import{B as F}from"./badge-IgYfdO9V.js";import{B as m}from"./button-DSYtEUz-.js";import{C as M}from"./checkbox-XYYM_-Ow.js";import{C as E}from"./color-picker-BeT-307a.js";import{D as T,a as D,b as O,c as P,d as L,e as V}from"./dialog-13Vh7iYP.js";import{I as $}from"./input-BwgTVrff.js";import{L as n}from"./label-Dif50TA4.js";import{S as q,a as z,b as H,c as R,d as A}from"./select-ZNRTKmmh.js";import{BehaviorsInfoModal as G}from"./BehaviorsInfoModal-DoMGKoj-.js";import{I as J}from"./info-Bft2xYep.js";import"./utils-jAU0Cazi.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-GEmL2IxC.js";import"./index-DCk08MMz.js";import"./index-Dyr2mIP4.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-D9YkVoQb.js";import"./index-rQBWhrbd.js";import"./index-fR5QWmBt.js";import"./index-Dd5Vhwor.js";import"./check-BKXQxHa7.js";import"./createLucideIcon-BQ0uF5zu.js";import"./index-BYkqkD9G.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./x-DprXbeJV.js";import"./index-Cxnn9A7l.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";function Be({status:c,machineStatuses:j,behaviors:l,isOpen:v,onOpenChange:d,onSubmit:C,data:i,setData:a,processing:h,errors:b}){var g,u,f;const[N,p]=B.useState(!1),S=!!(c!=null&&c.id),o=l.find(r=>r.name==="sets_machine_status"),_=(g=i.behaviors)==null?void 0:g.some(r=>r.id===(o==null?void 0:o.id)),k=(r,t)=>{let s=i.behaviors||[];t?s=[...s,{id:r,machine_status_id:null}]:s=s.filter(I=>I.id!==r),a("behaviors",s)},y=r=>{if(!o)return;const t=i.behaviors.map(s=>s.id===o.id?{...s,machine_status_id:r}:s);a("behaviors",t)},x=o?(f=(u=i.behaviors)==null?void 0:u.find(r=>r.id===o.id))==null?void 0:f.machine_status_id:null;return e.jsxs(e.Fragment,{children:[e.jsx(T,{open:v,onOpenChange:d,children:e.jsxs(D,{className:"sm:max-w-lg",children:[e.jsxs(O,{children:[e.jsx(P,{children:S?"Edit Ticket Status":"Create Ticket Status"}),e.jsx(L,{children:"Configure the rules and appearance for this ticket status."})]}),e.jsxs("form",{id:"ticket-status-form",onSubmit:C,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx($,{id:"name",value:i.name,onChange:r=>a("name",r.target.value),required:!0,className:"ring-1 ring-ring hover:bg-accent hover:text-accent-foreground"}),e.jsx(w,{message:b.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{children:"Behaviors"}),e.jsx(m,{type:"button",variant:"ghost",size:"icon",className:"h-5 w-5",onClick:()=>p(!0),children:e.jsx(J,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"space-y-2 rounded-md border p-4 shadow ring-1 ring-ring drop-shadow-lg",children:l.map(r=>{var t;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"bg-accent ring-1 ring-ring",id:`behavior-${r.id}`,checked:(t=i.behaviors)==null?void 0:t.some(s=>s.id===r.id),onCheckedChange:s=>k(r.id,!!s)}),e.jsx(n,{htmlFor:`behavior-${r.id}`,className:"px-2 py-0.5 hover:rounded hover:bg-accent hover:text-accent-foreground",children:r.title})]},r.id)})})]}),_&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"machine_status_id_for_behavior",children:"Machine Status to Set"}),e.jsxs(q,{value:x?String(x):"",onValueChange:r=>y(Number(r)),children:[e.jsx(z,{className:"hover:bg-accent hover:text-accent-foreground ring ring-ring",children:e.jsx(H,{placeholder:"Select a machine status..."})}),e.jsx(R,{children:j.map(r=>e.jsx(A,{value:String(r.id),className:"hover:bg-accent hover:text-accent-foreground",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full",style:{backgroundColor:r.bg_color}}),e.jsx("span",{children:r.name})]})},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Color & Preview"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{value:{bgColor:i.bg_color,textColor:i.text_color},onChange:r=>{a("bg_color",r.bgColor),a("text_color",r.textColor)}}),e.jsx("div",{className:"flex flex-1 items-center justify-center rounded-md p-4",children:e.jsx(F,{className:"px-4 py-2 text-base",style:{backgroundColor:i.bg_color,color:i.text_color},children:i.name||"Preview"})})]})]})]}),e.jsxs(V,{children:[e.jsx(m,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{type:"submit",form:"ticket-status-form",disabled:h,children:h?"Saving...":"Save"})]})]})}),e.jsx(G,{isOpen:N,onOpenChange:p,behaviors:l})]})}export{Be as TicketStatusFormModal};
