import{r as a,j as n,U as D,t as ce,m as Me,a as re}from"./app-CrM3bAr7.js";import{B as M}from"./button-DSYtEUz-.js";import{D as Fe,a as _e,b as De,c as Oe,d as ke,e as Le}from"./dialog-13Vh7iYP.js";import{I as B}from"./input-BwgTVrff.js";import{L as O}from"./label-Dif50TA4.js";import{c as H}from"./index-C7o-dAq6.js";import"./index-DCk08MMz.js";import{c as q}from"./utils-jAU0Cazi.js";import{T as $e}from"./textarea-BH7YRjF0.js";import{X as ae}from"./x-DprXbeJV.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./createLucideIcon-BQ0uF5zu.js";function F(e,t,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e==null||e(r),s===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function te(e,t=[]){let s=[];function o(i,c){const l=a.createContext(c),f=s.length;s=[...s,c];const m=d=>{var h;const{scope:p,children:y,...C}=d,g=((h=p==null?void 0:p[e])==null?void 0:h[f])||l,v=a.useMemo(()=>C,Object.values(C));return n.jsx(g.Provider,{value:v,children:y})};m.displayName=i+"Provider";function u(d,p){var g;const y=((g=p==null?void 0:p[e])==null?void 0:g[f])||l,C=a.useContext(y);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[m,u]}const r=()=>{const i=s.map(c=>a.createContext(c));return function(l){const f=(l==null?void 0:l[e])||i;return a.useMemo(()=>({[`__scope${e}`]:{...l,[e]:f}}),[l,f])}};return r.scopeName=e,[o,Ue(r,...t)]}function Ue(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const c=o.reduce((l,{useScope:f,scopeName:m})=>{const d=f(i)[`__scope${m}`];return{...l,...d}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return s.scopeName=t.scopeName,s}function ie(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ge(...e){return t=>{let s=!1;const o=e.map(r=>{const i=ie(r,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let r=0;r<o.length;r++){const i=o[r];typeof i=="function"?i():ie(e[r],null)}}}}function z(...e){return a.useCallback(Ge(...e),e)}function Ke(e){const t=e+"CollectionProvider",[s,o]=te(t),[r,i]=s(t,{collectionRef:{current:null},itemMap:new Map}),c=g=>{const{scope:v,children:h}=g,I=D.useRef(null),N=D.useRef(new Map).current;return n.jsx(r,{scope:v,itemMap:N,collectionRef:I,children:h})};c.displayName=t;const l=e+"CollectionSlot",f=H(l),m=D.forwardRef((g,v)=>{const{scope:h,children:I}=g,N=i(l,h),S=z(v,N.collectionRef);return n.jsx(f,{ref:S,children:I})});m.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=H(u),y=D.forwardRef((g,v)=>{const{scope:h,children:I,...N}=g,S=D.useRef(null),T=z(v,S),R=i(u,h);return D.useEffect(()=>(R.itemMap.set(S,{ref:S,...N}),()=>void R.itemMap.delete(S))),n.jsx(p,{[d]:"",ref:T,children:I})});y.displayName=u;function C(g){const v=i(e+"CollectionConsumer",g);return D.useCallback(()=>{const I=v.collectionRef.current;if(!I)return[];const N=Array.from(I.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((R,A)=>N.indexOf(R.ref.current)-N.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:c,Slot:m,ItemSlot:y},C,o]}var W=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},Be=ce[" useId ".trim().toString()]||(()=>{}),Ve=0;function le(e){const[t,s]=a.useState(Be());return W(()=>{s(o=>o??String(Ve++))},[e]),e||(t?`radix-${t}`:"")}var ze=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$=ze.reduce((e,t)=>{const s=H(`Primitive.${t}`),o=a.forwardRef((r,i)=>{const{asChild:c,...l}=r,f=c?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...l,ref:i})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function We(e){const t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...s)=>{var o;return(o=t.current)==null?void 0:o.call(t,...s)},[])}var qe=ce[" useInsertionEffect ".trim().toString()]||W;function ue({prop:e,defaultProp:t,onChange:s=()=>{},caller:o}){const[r,i,c]=Ye({defaultProp:t,onChange:s}),l=e!==void 0,f=l?e:r;{const u=a.useRef(e!==void 0);a.useEffect(()=>{const d=u.current;d!==l&&console.warn(`${o} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,o])}const m=a.useCallback(u=>{var d;if(l){const p=Ze(u)?u(e):u;p!==e&&((d=c.current)==null||d.call(c,p))}else i(u)},[l,e,i,c]);return[f,m]}function Ye({defaultProp:e,onChange:t}){const[s,o]=a.useState(e),r=a.useRef(s),i=a.useRef(t);return qe(()=>{i.current=t},[t]),a.useEffect(()=>{var c;r.current!==s&&((c=i.current)==null||c.call(i,s),r.current=s)},[s,r]),[s,o,i]}function Ze(e){return typeof e=="function"}var Xe=a.createContext(void 0);function de(e){const t=a.useContext(Xe);return e||t||"ltr"}var Q="rovingFocusGroup.onEntryFocus",Je={bubbles:!1,cancelable:!0},G="RovingFocusGroup",[ee,me,Qe]=Ke(G),[He,fe]=te(G,[Qe]),[et,tt]=He(G),pe=a.forwardRef((e,t)=>n.jsx(ee.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(ee.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(nt,{...e,ref:t})})}));pe.displayName=G;var nt=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:o,loop:r=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:f,onEntryFocus:m,preventScrollOnEntryFocus:u=!1,...d}=e,p=a.useRef(null),y=z(t,p),C=de(i),[g,v]=ue({prop:c,defaultProp:l??null,onChange:f,caller:G}),[h,I]=a.useState(!1),N=We(m),S=me(s),T=a.useRef(!1),[R,A]=a.useState(0);return a.useEffect(()=>{const j=p.current;if(j)return j.addEventListener(Q,N),()=>j.removeEventListener(Q,N)},[N]),n.jsx(et,{scope:s,orientation:o,dir:C,loop:r,currentTabStopId:g,onItemFocus:a.useCallback(j=>v(j),[v]),onItemShiftTab:a.useCallback(()=>I(!0),[]),onFocusableItemAdd:a.useCallback(()=>A(j=>j+1),[]),onFocusableItemRemove:a.useCallback(()=>A(j=>j-1),[]),children:n.jsx($.div,{tabIndex:h||R===0?-1:0,"data-orientation":o,...d,ref:y,style:{outline:"none",...e.style},onMouseDown:F(e.onMouseDown,()=>{T.current=!0}),onFocus:F(e.onFocus,j=>{const P=!T.current;if(j.target===j.currentTarget&&P&&!h){const k=new CustomEvent(Q,Je);if(j.currentTarget.dispatchEvent(k),!k.defaultPrevented){const L=S().filter(E=>E.focusable),U=L.find(E=>E.active),Z=L.find(E=>E.id===g),J=[U,Z,...L].filter(Boolean).map(E=>E.ref.current);he(J,u)}}T.current=!1}),onBlur:F(e.onBlur,()=>I(!1))})})}),xe="RovingFocusGroupItem",ve=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:o=!0,active:r=!1,tabStopId:i,children:c,...l}=e,f=le(),m=i||f,u=tt(xe,s),d=u.currentTabStopId===m,p=me(s),{onFocusableItemAdd:y,onFocusableItemRemove:C,currentTabStopId:g}=u;return a.useEffect(()=>{if(o)return y(),()=>C()},[o,y,C]),n.jsx(ee.ItemSlot,{scope:s,id:m,focusable:o,active:r,children:n.jsx($.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:F(e.onMouseDown,v=>{o?u.onItemFocus(m):v.preventDefault()}),onFocus:F(e.onFocus,()=>u.onItemFocus(m)),onKeyDown:F(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const h=rt(v,u.orientation,u.dir);if(h!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let N=p().filter(S=>S.focusable).map(S=>S.ref.current);if(h==="last")N.reverse();else if(h==="prev"||h==="next"){h==="prev"&&N.reverse();const S=N.indexOf(v.currentTarget);N=u.loop?at(N,S+1):N.slice(S+1)}setTimeout(()=>he(N))}}),children:typeof c=="function"?c({isCurrentTabStop:d,hasTabStop:g!=null}):c})})});ve.displayName=xe;var ot={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function st(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function rt(e,t,s){const o=st(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ot[o]}function he(e,t=!1){const s=document.activeElement;for(const o of e)if(o===s||(o.focus({preventScroll:t}),document.activeElement!==s))return}function at(e,t){return e.map((s,o)=>e[(t+o)%e.length])}var it=pe,ct=ve;function lt(e,t){return a.useReducer((s,o)=>t[s][o]??s,e)}var ge=e=>{const{present:t,children:s}=e,o=ut(t),r=typeof s=="function"?s({present:o.isPresent}):a.Children.only(s),i=z(o.ref,dt(r));return typeof s=="function"||o.isPresent?a.cloneElement(r,{ref:i}):null};ge.displayName="Presence";function ut(e){const[t,s]=a.useState(),o=a.useRef(null),r=a.useRef(e),i=a.useRef("none"),c=e?"mounted":"unmounted",[l,f]=lt(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const m=V(o.current);i.current=l==="mounted"?m:"none"},[l]),W(()=>{const m=o.current,u=r.current;if(u!==e){const p=i.current,y=V(m);e?f("MOUNT"):y==="none"||(m==null?void 0:m.display)==="none"?f("UNMOUNT"):f(u&&p!==y?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,f]),W(()=>{if(t){let m;const u=t.ownerDocument.defaultView??window,d=y=>{const g=V(o.current).includes(y.animationName);if(y.target===t&&g&&(f("ANIMATION_END"),!r.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",m=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=y=>{y.target===t&&(i.current=V(o.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(m),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:a.useCallback(m=>{o.current=m?getComputedStyle(m):null,s(m)},[])}}function V(e){return(e==null?void 0:e.animationName)||"none"}function dt(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Y="Tabs",[mt,Lt]=te(Y,[fe]),be=fe(),[ft,ne]=mt(Y),Ne=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:o,onValueChange:r,defaultValue:i,orientation:c="horizontal",dir:l,activationMode:f="automatic",...m}=e,u=de(l),[d,p]=ue({prop:o,onChange:r,defaultProp:i??"",caller:Y});return n.jsx(ft,{scope:s,baseId:le(),value:d,onValueChange:p,orientation:c,dir:u,activationMode:f,children:n.jsx($.div,{dir:u,"data-orientation":c,...m,ref:t})})});Ne.displayName=Y;var ye="TabsList",Se=a.forwardRef((e,t)=>{const{__scopeTabs:s,loop:o=!0,...r}=e,i=ne(ye,s),c=be(s);return n.jsx(it,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:o,children:n.jsx($.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});Se.displayName=ye;var Ce="TabsTrigger",je=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:o,disabled:r=!1,...i}=e,c=ne(Ce,s),l=be(s),f=Te(c.baseId,o),m=Re(c.baseId,o),u=o===c.value;return n.jsx(ct,{asChild:!0,...l,focusable:!r,active:u,children:n.jsx($.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":m,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:f,...i,ref:t,onMouseDown:F(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?c.onValueChange(o):d.preventDefault()}),onKeyDown:F(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&c.onValueChange(o)}),onFocus:F(e.onFocus,()=>{const d=c.activationMode!=="manual";!u&&!r&&d&&c.onValueChange(o)})})})});je.displayName=Ce;var Ie="TabsContent",we=a.forwardRef((e,t)=>{const{__scopeTabs:s,value:o,forceMount:r,children:i,...c}=e,l=ne(Ie,s),f=Te(l.baseId,o),m=Re(l.baseId,o),u=o===l.value,d=a.useRef(u);return a.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),n.jsx(ge,{present:r||u,children:({present:p})=>n.jsx($.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":f,hidden:!p,id:m,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:p&&i})})});we.displayName=Ie;function Te(e,t){return`${e}-trigger-${t}`}function Re(e,t){return`${e}-content-${t}`}var pt=Ne,xt=Se,vt=je,ht=we;function gt({className:e,...t}){return n.jsx(pt,{"data-slot":"tabs",className:q("flex flex-col gap-2",e),...t})}function bt({className:e,...t}){return n.jsx(xt,{"data-slot":"tabs-list",className:q("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function Nt({className:e,...t}){return n.jsx(vt,{"data-slot":"tabs-trigger",className:q("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function yt({className:e,...t}){return n.jsx(ht,{"data-slot":"tabs-content",className:q("flex-1 outline-none",e),...t})}const St=({currentStep:e})=>{const t=["Machine Details","Add Subsystems","Add Inspection Points"];return n.jsx("ol",{className:"flex w-full items-center text-center text-sm font-medium text-gray-500 sm:text-base dark:text-gray-400",children:t.map((s,o)=>{const r=o+1,i=e>r,c=e===r;return n.jsx("li",{className:`flex items-center md:w-full ${i?"font-bold text-primary":""} ${o<t.length-1?"after:mx-6 after:hidden after:h-1 after:w-full after:border-1 after:border-b after:border-gray-200 sm:after:inline-block sm:after:content-[''] xl:after:mx-10 dark:after:border-gray-700":""}`,children:n.jsxs("span",{className:`flex items-center after:mx-2 after:text-gray-200 after:content-['/'] sm:after:hidden dark:after:text-gray-500 ${c?"font-bold":""}`,children:[i?n.jsx("svg",{className:"me-2.5 h-3.5 w-3.5 sm:h-4 sm:w-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"})}):n.jsx("span",{className:"me-2",children:r}),s]})},r)})})};function $t({isOpen:e,onOpenChange:t,onFinish:s}){const[o,r]=a.useState(1),[i,c]=a.useState(null),[l,f]=a.useState(!1),{data:m,setData:u,post:d,errors:p,reset:y,processing:C}=Me({name:"",description:"",image:null}),[g,v]=a.useState(""),[h,I]=a.useState([]),[N,S]=a.useState({}),[T,R]=a.useState([]),[A,j]=a.useState(""),[P,k]=a.useState({}),[L,U]=a.useState({}),Z=b=>{b.preventDefault(),d(route("machines.store"),{preserveScroll:!0,onSuccess:x=>{const w=x.props.flash;w&&w.machine&&(c(w.machine.id),r(2))}})},X=()=>{g.trim()!==""&&!h.includes(g.trim())&&(I([...h,g.trim()]),v(""))},J=b=>{I(h.filter((x,w)=>w!==b))},E=async()=>{if(i){f(!0),S({});try{const b=await re.post(route("subsystems.store",i),{subsystems:h});R(b.data.subsystems),r(3)}catch(b){b.response&&b.response.status===422?S(b.response.data.errors):console.error("An unexpected error occurred:",b)}finally{f(!1)}}},oe=b=>{if(A.trim()!==""){const x=P[b]||[];x.includes(A.trim())||k({...P,[b]:[...x,A.trim()]}),j("")}},Ae=(b,x)=>{const w=P[b]||[];k({...P,[b]:w.filter((_,K)=>K!==x)})},Pe=async()=>{f(!0),U({});try{await re.post(route("inspection-points.store"),{inspection_points:P}),se()}catch(b){b.response&&b.response.status===422?U(b.response.data.errors):console.error("An unexpected error occurred:",b)}finally{f(!1)}},se=()=>{y(),v(""),I([]),R([]),j(""),k({}),S({}),U({}),r(1),c(null),t(!1),s()},Ee=()=>{var b;switch(o){case 1:return n.jsxs("form",{id:"machine-form",onSubmit:Z,className:"grid gap-4 py-4",autoComplete:"off",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{htmlFor:"name",children:"Machine Name"}),n.jsx(B,{className:"bg-accent ring-ring",id:"name",value:m.name,onChange:x=>u("name",x.target.value),required:!0}),p.name&&n.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.name})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{htmlFor:"description",children:"Description (Optional)"}),n.jsx($e,{className:"bg-accent",id:"description",value:m.description,onChange:x=>u("description",x.target.value)}),p.description&&n.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.description})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{htmlFor:"image",children:"Machine Image (Optional)"}),n.jsx(B,{className:"bg-accent",id:"image",type:"file",onChange:x=>u("image",x.target.files?x.target.files[0]:null)}),p.image&&n.jsx("p",{className:"mt-1 text-sm text-red-500",children:p.image})]})]});case 2:return n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{htmlFor:"subsystem-name",children:"Subsystem Name"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(B,{className:"bg-accent",id:"subsystem-name",value:g,onChange:x=>v(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),X())}}),n.jsx(M,{type:"button",onClick:X,children:"Add"})]}),N.subsystems&&n.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.subsystems[0]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{children:"Added Subsystems"}),h.length>0?n.jsx("div",{className:"space-y-2 rounded-md border p-2",children:h.map((x,w)=>n.jsxs("div",{className:"flex items-center justify-between rounded-sm bg-primary p-2 text-primary-foreground",children:[n.jsx("span",{children:x}),n.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>J(w),children:n.jsx(ae,{className:"h-4 w-4"})})]},w))}):n.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No subsystems added yet."})]})]});case 3:return n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs(gt,{defaultValue:(b=T[0])==null?void 0:b.id.toString(),className:"w-full overflow-x-auto",children:[n.jsx(bt,{className:"w-max",children:T.map(x=>n.jsx(Nt,{value:x.id.toString(),children:x.name},x.id))}),T.map(x=>{var w;return n.jsx(yt,{value:x.id.toString(),children:n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(O,{htmlFor:`ip-name-${x.id}`,children:"Inspection Point Name"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(B,{className:"bg-accent",id:`ip-name-${x.id}`,value:A,onChange:_=>j(_.target.value),onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),oe(x.id))}}),n.jsx(M,{type:"button",onClick:()=>oe(x.id),children:"Add Point"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(O,{children:["Added Points for ",x.name]}),(((w=P[x.id])==null?void 0:w.length)??0)>0?n.jsx("div",{className:"space-y-2 rounded-md border p-2",children:P[x.id].map((_,K)=>n.jsxs("div",{className:"flex items-center justify-between rounded-sm bg-primary p-2 text-primary-foreground",children:[n.jsx("span",{children:_}),n.jsx(M,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>Ae(x.id,K),children:n.jsx(ae,{className:"h-4 w-4"})})]},K))}):n.jsx("p",{className:"py-4 text-center text-sm text-muted-foreground",children:"No inspection points added yet for this subsystem."})]})]})},x.id)})]}),L.inspection_points&&n.jsx("p",{className:"mt-2 text-sm text-red-500",children:L.inspection_points[0]})]});default:return null}};return n.jsx(Fe,{open:e,onOpenChange:t,children:n.jsxs(_e,{className:"bg-popover sm:max-w-4xl",children:[n.jsxs(De,{children:[n.jsx(Oe,{children:"Create a New Machine"}),n.jsx(ke,{children:"Follow the steps to add a new machine and its components to the system."})]}),n.jsx("div",{className:"p-4",children:n.jsx(St,{currentStep:o})}),Ee(),n.jsxs(Le,{children:[o>1&&n.jsx(M,{variant:"outline",onClick:()=>r(o-1),disabled:l,children:"Back"}),o===1&&n.jsx(M,{type:"submit",form:"machine-form",disabled:C,children:C?"Saving...":"Save and Continue"}),o===2&&n.jsxs(n.Fragment,{children:[n.jsx(M,{variant:"secondary",onClick:se,disabled:l,children:"Finish"}),n.jsx(M,{onClick:E,disabled:l,children:l?"Saving...":"Save and Continue"})]}),o===3&&n.jsx(M,{onClick:Pe,disabled:l,children:l?"Saving...":"Finish"})]})]})})}export{$t as CreateMachineWizard};
