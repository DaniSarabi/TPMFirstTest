import{r as s,m as L,S as j,j as t,L as N}from"./app-CrM3bAr7.js";import{u as R,D as F,g as I}from"./data-table-DUdic_wO.js";import{D as P}from"./data-table-view-options-4_U_3RXz.js";import{L as G}from"./list-toolbar-E0ROXguB.js";import{P as k}from"./pagination-Dz5UDBcr.js";import{B}from"./button-DSYtEUz-.js";import{C as V}from"./confirm-delete-dialog-6UrjvZCz.js";import{A as q}from"./app-layout-CK9_8PlX.js";import{G as z}from"./general-settings-layout-CkIbxbx9.js";import{u as l}from"./useCan-CJh7wlIU.js";import{getColumns as H}from"./Columns-BMKm45Hh.js";import{EmailContactFormModal as J}from"./EmailContactFormModal-KPZz_eQQ.js";import{C as K}from"./circle-plus-C35qyZhc.js";import"./utils-jAU0Cazi.js";import"./dropdown-menu-D615tSEK.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-GEmL2IxC.js";import"./index-DCk08MMz.js";import"./index-Dyr2mIP4.js";import"./index-Cxnn9A7l.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./check-BKXQxHa7.js";import"./createLucideIcon-BQ0uF5zu.js";import"./input-BwgTVrff.js";import"./select-ZNRTKmmh.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./chevron-left-D6TzJdSq.js";import"./chevron-right-B5DMNuK2.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./alert-dialog-DBPQtoSw.js";import"./index-BYkqkD9G.js";import"./x-DprXbeJV.js";import"./tooltip-DWc-CuE-.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./badge-IgYfdO9V.js";import"./separator-C07NZpcB.js";import"./heading-BlBufu9I.js";import"./mail-59cOGpao.js";import"./data-table-column-header-B8b-xJ6_.js";import"./pencil-fd9eBnUr.js";import"./trash-2-BGsS4Tma.js";import"./dialog-13Vh7iYP.js";import"./label-Dif50TA4.js";import"./input-error-B-ImtbXT.js";const Q=[{title:"General Settings",href:route("settings.machine-status.index")},{title:"Email Contacts",href:route("settings.email-contacts.index"),isCurrent:!0}];function Xt({contacts:p,filters:a}){const[D,n]=s.useState(!1),[S,c]=s.useState(!1),[m,d]=s.useState(null),[u,b]=s.useState(null),[f,T]=s.useState(a.search||""),[o,h]=s.useState(a.sort?{id:a.sort,desc:a.direction==="desc"}:null),x=s.useRef(!0),r=L({name:"",email:"",department:""}),E={create:l("machines.edit"),edit:l("machines.edit"),delete:l("machines.edit")};s.useEffect(()=>{if(x.current){x.current=!1;return}const e=setTimeout(()=>{j.get(route("settings.email-contacts.index"),{search:f,sort:o==null?void 0:o.id,direction:o!=null&&o.desc?"desc":"asc"},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(e)},[f,o]);const O=(e,i)=>{h(i===null?null:{id:e,desc:i==="desc"})},y=()=>{r.reset(),d(null),n(!0)},M=e=>{r.setData({name:e.name,email:e.email,department:e.department}),d(e),n(!0)},w=e=>{b(e),c(!0)},v=()=>{u&&j.delete(route("settings.email-contacts.destroy",u.id),{onSuccess:()=>c(!1)})},A=e=>{e.preventDefault();const i=()=>n(!1);m&&"id"in m?r.put(route("settings.email-contacts.update",m.id),{onSuccess:i}):r.post(route("settings.email-contacts.store"),{onSuccess:i})},g=s.useMemo(()=>H(M,w,O,o),[o]),C=R({data:p.data,columns:g,getCoreRowModel:I()});return t.jsx(q,{breadcrumbs:Q,children:t.jsxs(z,{children:[t.jsx(N,{title:"Email Contacts"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Email Contacts"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage the contact list for email notifications."})]})}),t.jsx(G,{onSearch:T,searchPlaceholder:"Filter by name, email, or department...",createAction:E.create?t.jsxs(B,{onClick:y,children:[t.jsx(K,{className:"mr-2 h-4 w-4"}),"Add Contact"]}):null,viewOptionsAction:t.jsx(P,{table:C})}),t.jsx(F,{table:C,columns:g}),t.jsx(k,{paginated:p})]}),t.jsx(J,{isOpen:D,onOpenChange:n,onSubmit:A,contact:m,data:r.data,setData:r.setData,errors:r.errors,processing:r.processing}),t.jsx(V,{isOpen:S,onOpenChange:c,onConfirm:v,title:"Delete Contact",description:"Are you sure you want to delete this contact? This action cannot be undone."})]})})}export{Xt as default};
