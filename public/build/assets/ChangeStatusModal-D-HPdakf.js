import{m as x,r as j,j as e}from"./app-CrM3bAr7.js";import{I as l}from"./input-error-B-ImtbXT.js";import{B as c}from"./button-DSYtEUz-.js";import{D as f,a as v,b,c as S,d as w,e as _}from"./dialog-13Vh7iYP.js";import{L as d}from"./label-Dif50TA4.js";import{S as N,a as y,b as C,c as D,d as T}from"./select-ZNRTKmmh.js";import{T as k}from"./textarea-BH7YRjF0.js";import{T as E}from"./triangle-alert-C5k5l1el.js";import{C as F}from"./circle-x-CyllH9Co.js";import{S as I}from"./send-WmHc0PdS.js";import"./utils-jAU0Cazi.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./index-DCk08MMz.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./x-DprXbeJV.js";import"./createLucideIcon-BQ0uF5zu.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-Cxnn9A7l.js";import"./index-Dyr2mIP4.js";import"./index-GEmL2IxC.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./check-BKXQxHa7.js";function de({ticket:s,statuses:p,isOpen:r,onOpenChange:a}){const{data:i,setData:o,patch:h,processing:m,errors:n,reset:g}=x({new_status_id:s.status.id,comment:""});j.useEffect(()=>{r&&(g(),o("new_status_id",s.status.id))},[r]);const u=t=>{t.preventDefault(),h(route("tickets.status.update",s.id),{onSuccess:()=>a(!1)})};return e.jsx(f,{open:r,onOpenChange:a,children:e.jsxs(v,{children:[e.jsxs(b,{children:[e.jsx(S,{children:"Change Ticket Status"}),e.jsx(w,{children:"Select a new status for this ticket. You can also add a comment to log the reason for the change."}),e.jsxs("div",{className:"mt-2 flex items-start gap-2 rounded-lg border border-yellow-500/50 bg-yellow-50 p-3 text-sm text-yellow-800",children:[e.jsx(E,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("p",{children:"Please be aware that changing the status may trigger automated behaviors, such as starting a downtime log."})]})]}),e.jsxs("form",{id:"change-status-form",onSubmit:u,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"new_status_id",children:"New Status"}),e.jsxs(N,{value:String(i.new_status_id),onValueChange:t=>o("new_status_id",Number(t)),children:[e.jsx(y,{id:"new_status_id",className:"ring-1 hover:bg-accent hover:ring-primary",children:e.jsx(C,{placeholder:"Select a status..."})}),e.jsx(D,{children:p.map(t=>e.jsx(T,{value:String(t.id),className:"hover:bg-accent",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-2 h-3 w-3 rounded-full border",style:{backgroundColor:t.bg_color}}),e.jsx("span",{children:t.name})]})},t.id))})]}),e.jsx(l,{message:n.new_status_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"comment",children:"Comment (Optional)"}),e.jsx(k,{className:"ring-1 hover:bg-accent hover:ring-primary",id:"comment",value:i.comment,onChange:t=>o("comment",t.target.value),placeholder:"Add a comment explaining the status change..."}),e.jsx(l,{message:n.comment})]})]}),e.jsxs(_,{children:[e.jsxs(c,{className:"hover:bg-destructive hover:text-destructive-foreground",variant:"outline",onClick:()=>a(!1),children:[e.jsx(F,{}),"Cancel"]}),e.jsxs(c,{type:"submit",form:"change-status-form",disabled:m,children:[e.jsx(I,{}),m?"Saving...":"Save Changes"]})]})]})})}export{de as ChangeStatusModal};
