import{r as e,S as C,j as t,L as T}from"./app-CrM3bAr7.js";import{C as b}from"./card-grid-BPRpDGo_.js";import{u as L,D as k,g as y}from"./data-table-DUdic_wO.js";import{D as A}from"./data-table-view-options-4_U_3RXz.js";import{L as M}from"./list-toolbar-E0ROXguB.js";import{P as N}from"./pagination-Dz5UDBcr.js";import{B as j}from"./button-DSYtEUz-.js";import{A as R,L as D}from"./app-layout-CK9_8PlX.js";import{u as m}from"./useCan-CJh7wlIU.js";import{getColumns as V}from"./Columns-BTk-MHe6.js";import{TicketCard as E}from"./TicketCard-CilUMbo1.js";import{TicketStatusFilter as F}from"./TicketStatusFilter-Dr4fydAW.js";import{L as P}from"./list-Ca_CtMul.js";import"./utils-jAU0Cazi.js";import"./dropdown-menu-D615tSEK.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-GEmL2IxC.js";import"./index-DCk08MMz.js";import"./index-Dyr2mIP4.js";import"./index-Cxnn9A7l.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./check-BKXQxHa7.js";import"./createLucideIcon-BQ0uF5zu.js";import"./input-BwgTVrff.js";import"./select-ZNRTKmmh.js";import"./index-D9YkVoQb.js";import"./index-CFGBrPdz.js";import"./chevron-down-BZjTBYLj.js";import"./chevron-left-D6TzJdSq.js";import"./chevron-right-B5DMNuK2.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./index-BYkqkD9G.js";import"./x-DprXbeJV.js";import"./tooltip-DWc-CuE-.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./badge-IgYfdO9V.js";import"./separator-C07NZpcB.js";import"./data-table-column-header-B8b-xJ6_.js";import"./shield-alert-QN_81Jvb.js";import"./triangle-alert-C5k5l1el.js";import"./card-jCh-kFsa.js";import"./file-text-DOW8uveb.js";import"./wrench-D9uW3F3T.js";import"./clock-BrxB6LzT.js";import"./popover-BsjEzbmq.js";import"./circle-plus-C35qyZhc.js";const z=[{title:"Tickets",href:route("tickets.index"),isCurrent:!0}];function It({tickets:s,filters:r,ticketStatuses:S}){const[i,n]=e.useState(r.view||"grid"),[c,g]=e.useState(r.search||""),[a,v]=e.useState(new Set(r.statuses||[])),[p,l]=e.useState(r.sort?{id:r.sort,desc:r.direction==="desc"}:null),d=e.useRef(!0),u={create:m("roles.create"),edit:m("roles.edit"),delete:m("roles.delete")};e.useEffect(()=>{if(d.current){d.current=!1;return}const o=setTimeout(()=>{C.get(route("tickets.index"),{search:c,view:i,statuses:Array.from(a)},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(o)},[c,i,a]);const w=(o,h)=>{l(h===null?null:{id:o,desc:h==="desc"})},x=e.useMemo(()=>V(u,w,p),[u,p]),f=L({data:s.data,columns:x,getCoreRowModel:y()});return t.jsxs(R,{breadcrumbs:z,children:[t.jsx(T,{title:"Active Tickets"}),t.jsxs("div",{className:"space-y-4 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Active Maintenance Tickets"}),t.jsx("p",{className:"text-muted-foreground",children:"A list of all tickets that are currently open or in progress."})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{variant:i==="grid"?"default":"outline",size:"icon",onClick:()=>n("grid"),children:t.jsx(D,{className:"h-4 w-4"})}),t.jsx(j,{variant:i==="list"?"default":"outline",size:"icon",onClick:()=>n("list"),children:t.jsx(P,{className:"h-4 w-4"})})]})]}),t.jsxs(M,{onSearch:g,searchPlaceholder:"Search by machine name...",viewOptionsAction:i==="list"?t.jsx(A,{table:f}):null,children:[t.jsx(F,{title:"Status",options:S,selectedValues:a,onSelectedValuesChange:v})," "]}),i==="grid"?t.jsx(b,{items:s.data,renderCard:o=>t.jsx(E,{ticket:o})}):t.jsx(k,{table:f,columns:x}),t.jsx(N,{paginated:s})]})]})}export{It as default};
