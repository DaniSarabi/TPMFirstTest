import{r as m,j as e,L as j,$ as g}from"./app-CrM3bAr7.js";import{B as c}from"./badge-IgYfdO9V.js";import{B as i}from"./button-DSYtEUz-.js";import{C as w,a as N,b as C,d as _,c as b}from"./card-jCh-kFsa.js";import{I as v}from"./image-viewer-modal-4ByfuxrQ.js";import{S as I}from"./separator-C07NZpcB.js";import{A as k,T as S}from"./app-layout-CK9_8PlX.js";import{T}from"./triangle-alert-C5k5l1el.js";import{D as y}from"./download-Bs0UjOXf.js";import{F as D}from"./file-text-DOW8uveb.js";import{C as V}from"./camera-Ca2Q59WX.js";import{C as A}from"./circle-check-big-DIrqNAJp.js";import{C as B}from"./circle-alert-BpGn1koC.js";import{C as R}from"./circle-x-CyllH9Co.js";import"./index-C7o-dAq6.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./dialog-13Vh7iYP.js";import"./index-BYkqkD9G.js";import"./index-DCk08MMz.js";import"./index-C07_Bs9F.js";import"./tslib.es6-CMwweBXX.js";import"./x-DprXbeJV.js";import"./createLucideIcon-BQ0uF5zu.js";import"./index-GEmL2IxC.js";import"./tooltip-DWc-CuE-.js";import"./index-ChLr_mRA.js";import"./index-CipIuUZM.js";import"./index-Dyr2mIP4.js";import"./index-6v8HNz3P.js";import"./floating-ui.react-dom-D6wYppxE.js";import"./index-fR5QWmBt.js";import"./index-rQBWhrbd.js";import"./index-Dd5Vhwor.js";import"./index-CFGBrPdz.js";import"./dropdown-menu-D615tSEK.js";import"./index-Cxnn9A7l.js";import"./check-BKXQxHa7.js";import"./user-avatar-CalEyW6r.js";import"./chevrons-up-down-CqP_Vf3P.js";import"./shield-check-0vfauCFM.js";import"./chevron-right-B5DMNuK2.js";const O=({severity:s})=>s===0?e.jsx(A,{className:"h-5 w-5 text-green-500"}):s===1?e.jsx(B,{className:"h-5 w-5 text-yellow-500"}):s===2?e.jsx(R,{className:"h-5 w-5 text-red-500"}):null;function ve({report:s}){var o;const[d,a]=m.useState(!1),[p,x]=m.useState(""),h=[{title:"Inspections",href:route("inspections.index")},{title:`Report #${s.id}`,href:route("inspections.show",s.id),isCurrent:!0}],f=r=>{x(r),a(!0)};return e.jsxs(k,{breadcrumbs:h,children:[e.jsx(j,{title:`Inspection Report #${s.id}`}),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Inspection Report #",s.id]}),e.jsxs("p",{className:"text-muted-foreground",children:["Details for inspection on ",e.jsx("span",{className:"font-semibold",children:s.machine_name})," by"," ",e.jsx("span",{className:"font-semibold",children:s.user_name}),"."]}),s.status_change_info&&e.jsxs(c,{variant:"secondary",className:"mt-2",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),s.status_change_info]})]}),e.jsx(i,{asChild:!0,children:e.jsxs("a",{href:route("inspections.pdf",s.id),target:"_blank",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Download PDF"]})})]}),e.jsxs(w,{className:"shadow-lg drop-shadow-lg",children:[e.jsxs(N,{children:[e.jsx(C,{children:"Inspection Results"}),e.jsxs(_,{children:["Completed on: ",s.completion_date]})]}),e.jsx(b,{className:"space-y-6",children:(o=s.grouped_items)==null?void 0:o.map(r=>{var l;return e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:r.name}),e.jsx("div",{className:"rounded-md border shadow-lg drop-shadow-sm",children:(l=r.report_items)==null?void 0:l.map((t,u)=>{const n=t.ticket||t.pinged_ticket;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-4 p-4",children:[e.jsx("div",{className:"flex w-full items-center justify-between",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(O,{severity:t.status.severity}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.point.name}),e.jsx(c,{className:"mt-1",style:{backgroundColor:t.status.bg_color,color:t.status.text_color},children:t.status.name})]})]})}),e.jsxs("div",{className:"flex w-full flex-wrap items-center justify-end gap-2 md:flex-nowrap",children:[t.comment&&e.jsxs("div",{className:"flex w-full items-start gap-2 rounded-md border bg-muted/50 p-2 text-sm text-muted-foreground md:w-auto md:flex-1",children:[e.jsx(D,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"break-all",children:t.comment})]}),t.image_url&&e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>f(t.image_url),children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," View Photo"]}),n&&e.jsx(i,{size:"sm",asChild:!0,children:e.jsxs(g,{href:route("tickets.show",n.id),children:[e.jsx(S,{className:"mr-2 h-4 w-4"})," View Ticket"]})})]})]}),u<r.report_items.length-1&&e.jsx(I,{})]},t.id)})})]},r.id)})})]})]}),e.jsx(v,{isOpen:d,onOpenChange:a,imageUrl:p,imageAlt:"Inspection Photo"})]})}export{ve as default};
